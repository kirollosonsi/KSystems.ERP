@using K_Systems.Presentation.Web.Models.ViewModel
@using K_Systems.Data.Core.Domain

@model CourseHomeViewModel

<input type="hidden" name="order" id="inputOrder" value='@(Model.order ?? "asc")' />
<input type="hidden" name="sortBy" id="inputSortBy" value='@(Model.sortBy ?? "ID")' />

<table class="table table-hover table-striped text-center mg-t-s" data-selected="false" id="dataTable">
    <thead>
        <tr>
            <th class="text-center" data-sortBy="ID">
                @Html.DisplayNameFor(emps => emps.course.ID)
                <span class='glyphicon glyphicon-sort-by-attributes @(Model.sortBy == "ID" && Model.order=="asc" ? "": "text-muted" )' data-order="asc"></span>
                <span class="glyphicon glyphicon-sort-by-attributes-alt  @(Model.sortBy == "ID" && Model.order=="dsc" ? "": "text-muted" )" data-order="dsc"></span>
            </th>
            <th class="text-center" data-sortBy="fName">
                @Html.DisplayNameFor(emps => emps.course.name)
                <span class="glyphicon glyphicon-sort-by-attributes @(Model.sortBy == "fName"  && Model.order=="asc" ? "": "text-muted" )" data-order="asc"></span>
                <span class="glyphicon glyphicon-sort-by-attributes-alt @(Model.sortBy == "fName"   && Model.order=="dsc"? "": "text-muted" )" data-order="dsc"></span>
            </th>
            <th class="text-center" data-sortBy="lName">
                @Html.DisplayNameFor(emps => emps.course.description)
                <span class="glyphicon glyphicon-sort-by-attributes @(Model.sortBy == "lName" && Model.order=="asc" ? "": "text-muted" )" data-order="asc"></span>
                <span class="glyphicon glyphicon-sort-by-attributes-alt @(Model.sortBy == "lName" && Model.order=="dsc" ? "": "text-muted" )" data-order="dsc"></span>
            </th>
        </tr>
    </thead>
    <tbody>

        @foreach (Course course in Model.courses)
        {
            <tr data-id="@course.ID">
                <td>@Html.DisplayFor(e => course.ID)</td>
                <td>@Html.DisplayFor(e => course.name)</td>
                <td>@Html.DisplayFor(e => course.description)</td>
            </tr>
        }


    </tbody>
</table>

<div class="col-lg-8 col-lg-offset-4" id="pagingRemovable">
    <nav aria-label="Page navigation">
        <ul class="pagination">

            <li class="@((((int)Model.page) - 1) <= 0 ? "disable": "")">
                <a href="javascript:void(0)" data-url="@Url.Action("Search",
                        new
                   {
                       search = Model.search,
                       items = Model.items,
                       sortBy = Model.sortBy,
                       order = Model.order,
                       page = (((int)Model.page) - 1).ToString()
                   })"
                   aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>

            @for (int i = 0; i < (int)Model.totalPages; i++)
            {
                <li class="@((int)Model.page == (i+1)? "active": "")">

                    <a href="javascript:void(0)" data-url="@Url.Action("Search",new
                                                         {
                                                             search = Model.search,
                                                             items = Model.items,
                                                             sortBy = Model.sortBy,
                                                             order = Model.order,
                                                             page = (i + 1).ToString()
                                                         })">
                        @((i + 1).ToString())
                    </a>
                    @*@Html.ActionLink((i + 1).ToString(),"Search",
                        new
                        {
                            search = Model.search,
                            items = Model.items,
                            sortBy = Model.sortBy,
                            order = Model.order,
                            page = (i + 1).ToString()
                        })*@
                </li>
            }

            <li class="@((((int)Model.page) + 1) > (int)Model.totalPages ? "disable": "")">
                <a href="javascript:void(0)" data-url="@Url.Action("Search",
                        new
                   {
                       search = Model.search,
                       items = Model.items,
                       sortBy = Model.sortBy,
                       order = Model.order,
                       page = (((int)Model.page) + 1).ToString()
                   })"
                   aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>




